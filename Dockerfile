FROM node:18.17.0

ARG web=/opt/workspace/dapp
ARG NEXT_PUBLIC_NETWORK_ENV
ARG NEXT_PUBLIC_WEBSITE_NAME
ARG BUILD_ENV
ENV NEXT_PUBLIC_NETWORK_ENV=${NEXT_PUBLIC_NETWORK_ENV}
ENV NEXT_PUBLIC_WEBSITE_NAME=${NEXT_PUBLIC_WEBSITE_NAME}

WORKDIR ${web}

COPY . ${web}

RUN yarn && yarn build:${BUILD_ENV}

ENTRYPOINT yarn start

EXPOSE 3000
